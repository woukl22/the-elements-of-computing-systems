# Chapter 3: Sequential logic

#### 조합 칩(Combinational chip)
- 입력 값의 조합에만 의존하는 함수를 계산한다.
- **상태를 유지하지 않는다.**
- 불 논리 칩과 산술 칩을 모두 포함한다.

#### 순차 칩(Sequential chip)

<br><br>

배경
---
#### 클록(clock)
- **시간 진행을 표현**함
- 0-1 또는 고(high)-저(low), 틱(tick)-톡(tock) 등으로 표시된 두 신호 상태를 연속해서 오가는 발진기(oscillator)로 구현됨
- 현재 클록의 상태(틱 또는 톡)는 **2진 신호로 표현**됨
- 이 신호는 하드웨어 회로망을 통해 컴퓨터에 있는 **모든 순차 칩들에 동시에 전달**됨
- 사이클(cycle): 
  - '틱'의 시작에서 다음번 '톡'의 끝까지 경과된 시간
  - **하나의 시간 단위 구분**을 모델링한 것

<br>

#### 플립플롭(flip-flop)
- 이 책에서는 여러 종류의 플립플롭 중에서 **데이터 플립플롭(data flip-flop, DFF)** 를 사용함
- 이 소자의 인터페이스는 **1 비트 데이터 입력과 1 비트 데이터 출력**으로 구성됨
- DFF는 마스터 클록에 따라 계속적으로 바뀌는 클록 입력 신호를 받음
- **out(t) = in(t-1)** 을 수행하게 됨
- 한 마디로 정리하면, **바로 이전 시간의 입력을 출력하는 장치**
- 컴퓨터에서 상태를 유지하는 모든 하드웨어(2진 셀, 레지스터, RAM 등)의 기초

<br>

#### 레지스터(register)
- **시간이 지나도 값을 '저장'하고 '로드'할 수 있는 장치**
- **out(t) = out(t-1)**
- **내부 핀의 입력원은 오로지 하나**여야만 한다.
- 멀티플렉서의 '**선택 비트**'는 전체 레지스터의 '**로드 비트(load bit)**'
- **새로운 값 저장**: 입력 in에 새로운 값을 넣고, **로드 비트를 1**로 설정하면 됨
- **기존 값 유지**: **로드비트를 0**으로 설정하면 됨
- 폭(width): 레지스터가 저장할 수 있는 비트의 개수(ex: 16, 32, 64비트)
- 단어(word): 레지스터에 저장되는 멀티비트 값

![image](https://user-images.githubusercontent.com/69896250/147710416-6ae1a1e0-f2eb-4127-97e6-40e4338be0e4.png)

<br>

#### 메모리(memory)
**임의 접근 메모리(Random Access Memory, RAM)**
- 레지스터를 여러 개 쌓아 올려서 만듦
- 메모리 내의 어떤 단어든 물리적 **저장 위치와 관계없이 똑같은 속도로 직접 접근이 가능**함
- **읽기 연산(load=0)**: 선택된 레지스터의 값을 바로 출력
- **쓰기 연산(load=1)**: 다음 사이클 때 선택된 메모리 레지스터에서 입력값을 받아, 해당 값을 출력
- 폭(width): 단어의 비트 개수
- 크기(size): RAM 내의 단어 수

<br>

#### 계수기(counter)
- **매 시간 단위마다 내부 상태 값을 증가**시키는 순차 칩
- **out(t) = out(t-1)+c** (c는 보통 1)
- ex) 프로그램 계수기(program counter): 다음에 실행해야 할 프로그램 명령의 주소를 출력하는 기능을 함

<br>

#### 시간 문제
***조합 칩(combinational chip)***
- **시간을 인지하지 못함**
- 피드백 루프를 넣으면 출력은 입력을, 입력은 출력을 따르므로, 결국 **출력이 자기 자신을 따라 결정**된다는 문제가 발생
- **조합 칩의 출력**은 시간과 무관하게 **입력이 바뀔 때만 변경**됨
- 시간 개념이 없으므로 언제 어떤 데이터 값이 도착하든 계속 값을 더한다.

***순차 칩(sequential chip)***
- 직접적이든 간접적이든 항상 **하나 이상의 DFF 게이트를 장착**한 칩
- **시간 t의 출력은 자기 자신이 아닌 시간 t-1의 출력**을 하기 때문에 조합 칩에 피드백 루프가 있을 때 생기는 **'데이터 경쟁(data race)'를 피할 수 있음**
- **순차 칩의 출력**은 **한 클록 사이클이 넘어갈 때 바뀌며**, 한 사이클 안에서는 바뀌지 않는다.
- **이산화(discretization)**: 순차 칩의 출력이 연속적으로 변하지 않고 **클록 사이클 단위로 변화하는 것**
